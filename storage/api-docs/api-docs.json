{
    "openapi": "3.1.0",
    "info": {
        "title": "API Системы Управления Домашней Библиотекой",
        "version": "0.5.0"
    },
    "servers": [
        {
            "url": "http://localhost/api/v1",
            "description": "Локальный сервер."
        }
    ],
    "paths": {
        "/auth/forgot-password": {
            "post": {
                "tags": [
                    "auth"
                ],
                "summary": "Сброс пароля",
                "description": "Запрос на сброс пароля",
                "operationId": "ebc784da7fb6aa4c4ab782d94e811929",
                "requestBody": {
                    "description": "JSON объект учетных данных пользователя для сброса пароля",
                    "content": {
                        "application/json": {
                            "schema": {
                                "description": "Тело запроса.",
                                "required": [
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "email": {
                                        "description": "email",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            },
                            "example": {
                                "email": "john.doe@example.com"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "description": "Сообщение.",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                },
                                "example": {
                                    "message": "Мы выслали вам ссылку для сброса пароля по электронной почте!"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "description": "Сообщение.",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                },
                                "example": {
                                    "message": "Пользователь не найден."
                                }
                            }
                        }
                    }
                }
            }
        },
        "/auth/login": {
            "post": {
                "tags": [
                    "auth"
                ],
                "summary": "Авторизация",
                "description": "Запрос на идентификацию и авторизацию пользователя.",
                "operationId": "071c12c73ada57d09296199486851f15",
                "requestBody": {
                    "description": "JSON объект учетных данных пользователя",
                    "content": {
                        "application/json": {
                            "schema": {
                                "description": "Тело запроса.",
                                "required": [
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "email": {
                                        "description": "email",
                                        "type": "string"
                                    },
                                    "password": {
                                        "description": "Пароль.",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            },
                            "example": {
                                "email": "john.doe@example.com",
                                "password": "password"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "access_token": {
                                            "description": "Токен доступа.",
                                            "type": "string"
                                        },
                                        "token_type": {
                                            "description": "Тип токена.",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                },
                                "example": {
                                    "access_token": "2|ioWWhr1rvgJuMGGzpdGD1jagfVaC5JSQV0uIQll480242318",
                                    "token_type": "Bearer"
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/login_validation_error"
                    }
                }
            }
        },
        "/auth/logout": {
            "delete": {
                "tags": [
                    "auth"
                ],
                "summary": "Выход",
                "description": "Запрос на выход пользователя из системы.",
                "operationId": "e0c2e4ed4cbb888d578e69d855f29b55",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "description": "Сообщение",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                },
                                "example": {
                                    "message": "Выход из системы успешно выполнен"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/unauthenticated"
                    }
                }
            }
        },
        "/auth/register": {
            "post": {
                "tags": [
                    "auth"
                ],
                "summary": "Регистрация",
                "description": "Запрос на регистрацию пользователя.",
                "operationId": "2ce5382d83f68a8e8443aeb4ebf7db62",
                "requestBody": {
                    "description": "JSON объект данных пользователя",
                    "content": {
                        "application/json": {
                            "schema": {
                                "description": "Тело запроса.",
                                "required": [
                                    "email",
                                    "password",
                                    "password_confirmation",
                                    "name"
                                ],
                                "properties": {
                                    "name": {
                                        "description": "Имя пользователя",
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "email": {
                                        "description": "email",
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "password": {
                                        "description": "Пароль.",
                                        "type": "string",
                                        "minLength": 6
                                    },
                                    "password_confirmation": {
                                        "description": "Подтверждение пароля.",
                                        "type": "string",
                                        "minLength": 6
                                    }
                                },
                                "type": "object",
                                "example": {
                                    "email": "john.doe@example.com",
                                    "password": "password",
                                    "password_confirmation": "password",
                                    "name": "John Doe"
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "name": {
                                            "description": "Имя пользователя.",
                                            "type": "string",
                                            "maxLength": 255
                                        },
                                        "email": {
                                            "description": "email.",
                                            "type": "string",
                                            "maxLength": 255
                                        },
                                        "password": {
                                            "description": "Пароль.",
                                            "type": "string",
                                            "minLength": 6
                                        },
                                        "password_confirmation": {
                                            "description": "Подтверждение пароля.",
                                            "type": "string",
                                            "minLength": 6
                                        }
                                    },
                                    "type": "object"
                                },
                                "example": {
                                    "name": "John Doe",
                                    "email": "john.doe@example.com",
                                    "id": 1
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Unprocessable Entity",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "description": "Сообщение об ошибке"
                                        },
                                        "errors": {
                                            "description": "Массив ошибок",
                                            "properties": {
                                                "name": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "name": {
                                                                "description": "Невалидное имя пользователя",
                                                                "type": "string"
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object",
                                    "example": {
                                        "message": "The name field is required.",
                                        "errors": {
                                            "name": [
                                                "The name field is required."
                                            ]
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/book": {
            "post": {
                "tags": [
                    "book"
                ],
                "summary": "Создание новой книги",
                "description": "Запрос на создание книги.",
                "operationId": "f8e5277f29dea63d344f5b9b4a84403a",
                "requestBody": {
                    "description": "JSON объект для создания новой книги",
                    "content": {
                        "application/json": {
                            "schema": {
                                "description": "Тело запроса.",
                                "required": [
                                    "title",
                                    "author_id"
                                ],
                                "properties": {
                                    "title": {
                                        "description": "Название книги",
                                        "type": "string"
                                    },
                                    "author_id": {
                                        "description": "ID автора книги.",
                                        "type": "integer"
                                    }
                                },
                                "type": "object",
                                "maxLength": 150
                            },
                            "example": {
                                "title": "Как войти в IT.",
                                "author_id": 1
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "description": "Сообщение об успешном создании книги.",
                                            "type": "string"
                                        },
                                        "book": {
                                            "description": "Информация о книге.",
                                            "properties": {
                                                "id": {
                                                    "description": "ID книги.",
                                                    "type": "integer"
                                                },
                                                "author": {
                                                    "description": "Информация о авторе книги.",
                                                    "properties": {
                                                        "id": {
                                                            "description": "ID автора.",
                                                            "type": "integer"
                                                        },
                                                        "surname": {
                                                            "description": "Фамилия автора",
                                                            "type": "string"
                                                        },
                                                        "name": {
                                                            "description": "Имя автора",
                                                            "type": "string"
                                                        },
                                                        "patronymic": {
                                                            "description": "Отчество автора",
                                                            "type": "string"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                },
                                "example": {
                                    "message": "Книга успешно создана.",
                                    "book": {
                                        "id": 1,
                                        "title": "Как войти в IT.",
                                        "author": {
                                            "id": 1,
                                            "surname": "Иванов",
                                            "name": "Иван",
                                            "patronymic": "Иванович"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/not_found"
                    },
                    "422": {
                        "$ref": "#/components/responses/book_validation_errors"
                    },
                    "401": {
                        "$ref": "#/components/responses/unauthenticated"
                    }
                }
            }
        },
        "/book/{book}": {
            "get": {
                "tags": [
                    "book"
                ],
                "summary": "Информация о книге",
                "description": "Запрос на вывод детальной информации о конкретной книге.",
                "operationId": "a7fd9a8270fcbf3f328d0a7522f75d40",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/book"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "description": "Данные о книге",
                                            "properties": {
                                                "id": {
                                                    "description": "ID книги",
                                                    "type": "integer"
                                                },
                                                "title": {
                                                    "description": "Название книги",
                                                    "type": "string"
                                                },
                                                "author": {
                                                    "description": "Автор книги.",
                                                    "properties": {
                                                        "id": {
                                                            "description": "ID автора",
                                                            "type": "integer"
                                                        },
                                                        "surname": {
                                                            "description": "Фамилия автора",
                                                            "type": "string"
                                                        },
                                                        "name": {
                                                            "description": "Имя автора",
                                                            "type": "string"
                                                        },
                                                        "patronymic": {
                                                            "description": "Отчество автора",
                                                            "type": "string"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                },
                                "example": {
                                    "data": {
                                        "id": 1,
                                        "title": "Как войти в IT.",
                                        "author": {
                                            "id": 1,
                                            "surname": "Иванов",
                                            "name": "Иван",
                                            "patronymic": "Иванович"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/not_found"
                    },
                    "401": {
                        "$ref": "#/components/responses/unauthenticated"
                    }
                }
            },
            "put": {
                "tags": [
                    "book"
                ],
                "summary": "Обновление книги",
                "description": "Запрос на обновление информации о конкретной книге.",
                "operationId": "7c92b1861a593a393fd4cba9ff826cb9",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/book"
                    }
                ],
                "requestBody": {
                    "description": "JSON объект для создания новой книги",
                    "content": {
                        "application/json": {
                            "schema": {
                                "description": "Тело запроса.",
                                "required": [
                                    "title",
                                    "author_id"
                                ],
                                "properties": {
                                    "title": {
                                        "description": "Название книги",
                                        "type": "string"
                                    },
                                    "author_id": {
                                        "description": "ID автора книги.",
                                        "type": "integer"
                                    }
                                },
                                "type": "object",
                                "maxLength": 150
                            },
                            "example": {
                                "title": "Как выйти из IT.",
                                "author_id": 2
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "description": "Сообщение об успешном создании книги.",
                                            "type": "string"
                                        },
                                        "book": {
                                            "description": "Информация о книге.",
                                            "properties": {
                                                "id": {
                                                    "description": "ID книги.",
                                                    "type": "integer"
                                                },
                                                "author": {
                                                    "description": "Информация о авторе книги.",
                                                    "properties": {
                                                        "id": {
                                                            "description": "ID автора.",
                                                            "type": "integer"
                                                        },
                                                        "surname": {
                                                            "description": "Фамилия автора",
                                                            "type": "string"
                                                        },
                                                        "name": {
                                                            "description": "Имя автора",
                                                            "type": "string"
                                                        },
                                                        "patronymic": {
                                                            "description": "Отчество автора",
                                                            "type": "string"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                },
                                "example": {
                                    "message": "Книга успешно обновлена.",
                                    "book": {
                                        "id": 1,
                                        "title": "Как выйти из IT.",
                                        "author": {
                                            "id": 2,
                                            "surname": "Пупкин",
                                            "name": "Василий",
                                            "patronymic": "Васильевич"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/not_found"
                    },
                    "422": {
                        "$ref": "#/components/responses/book_validation_errors"
                    },
                    "401": {
                        "$ref": "#/components/responses/unauthenticated"
                    }
                }
            },
            "delete": {
                "tags": [
                    "book"
                ],
                "summary": "Удаление книги",
                "description": "Запрос на удаление конкретной книги.",
                "operationId": "5b2b123542f2cdd60641d79c4ed4369e",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/book"
                    }
                ],
                "responses": {
                    "204": {
                        "description": "No Content"
                    },
                    "404": {
                        "$ref": "#/components/responses/not_found"
                    },
                    "401": {
                        "$ref": "#/components/responses/unauthenticated"
                    }
                }
            }
        }
    },
    "components": {
        "responses": {
            "not_found": {
                "description": "Not Found",
                "content": {
                    "application/json": {
                        "schema": {
                            "properties": {
                                "message": {
                                    "description": "Сообщение",
                                    "type": "string"
                                }
                            },
                            "type": "object"
                        },
                        "example": {
                            "message": "Запрашиваемый ресурс не найден"
                        }
                    }
                }
            },
            "book_validation_errors": {
                "description": "Unprocessable Content",
                "content": {
                    "application/json": {
                        "schema": {
                            "properties": {
                                "message": {
                                    "description": "Сообщение об ошибках.",
                                    "type": "string"
                                },
                                "errors": {
                                    "description": "Перечисление ощибок валидации",
                                    "properties": {},
                                    "type": "object"
                                }
                            },
                            "type": "object"
                        },
                        "example": {
                            "message": "The title field is required. (and 1 more error)",
                            "errors": {
                                "title": [
                                    "The title field is required."
                                ],
                                "author_id": [
                                    "The author_id field is required."
                                ]
                            }
                        }
                    }
                }
            },
            "unauthenticated": {
                "description": "Unauthorized",
                "content": {
                    "application/json": {
                        "schema": {
                            "properties": {
                                "message": {
                                    "description": "Сообщение",
                                    "type": "string"
                                }
                            },
                            "type": "object"
                        },
                        "example": {
                            "message": "Unauthenticated."
                        }
                    }
                }
            },
            "login_validation_error": {
                "description": "Unprocessable Content",
                "content": {
                    "application/json": {
                        "schema": {
                            "properties": {
                                "message": {
                                    "description": "Сообщение",
                                    "type": "string"
                                },
                                "errors": {
                                    "description": "Массив ошибок",
                                    "type": "string"
                                }
                            },
                            "type": "object"
                        },
                        "example": {
                            "message": "Предоставленные учетные данные неверны.",
                            "errors": [
                                [
                                    "Предоставленные учетные данные неверны."
                                ]
                            ]
                        }
                    }
                }
            }
        },
        "parameters": {
            "book": {
                "name": "book",
                "in": "path",
                "description": "Идентификатор книги",
                "required": true,
                "schema": {
                    "type": "integer"
                }
            }
        },
        "securitySchemes": {
            "sanctum": {
                "type": "apiKey",
                "description": "Enter token in format (Bearer <token>)",
                "name": "Authorization",
                "in": "header"
            }
        }
    },
    "tags": [
        {
            "name": "book",
            "description": "Все эндпоинты API, относящиеся к книгам"
        },
        {
            "name": "auth",
            "description": "Все эндпоинты API, относящиеся к аутентификации пользователя"
        }
    ],
    "security": [
        {
            "sanctum": []
        }
    ]
}